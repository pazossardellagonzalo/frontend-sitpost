<div class="container" style="margin-top: 5%" *ngFor="let post of posts;">

  <!-- Profile with posts -->
  <div class="card" style="max-width: 1000px;">
      <div class="card-title">
        <div class="justify-content-start">
          <div class="image-container">
              <img src="" style="width: 150px; height: 150px; margin-left: 2%; margin-top: 1%;" class="img-thumbnail" />
          </div>
          <div class="userData">
              <h1 class="d-block" style="font-size: 1.5rem; font-weight: bold; margin-left: 2%; margin-top: 1%;">@{{ userProfile.username }}</h1>
          </div>
          <div class="Posts" style="margin-top: 2%; margin-bottom: 1%; margin-left: 2%;">
            <h2>Posts:</h2>
          </div>
          <div class="card-body" >
            <div *ngIf="this.posts.length <= 0">
              <h1>This user hasnt posted anything yet</h1>
            </div>
            <div class="card" style="max-width: 1000px;">
              <div class="card-header">
                <h2>@{{ post.user }}
                </h2>
              </div>
              <div class="card-body">
                <h1>{{ post.title }}</h1>
                <h4>{{ post.body }}</h4>
              </div>
              <button class="btn btn-primary btn-sm" style="float: left; max-width: 60px; margin-left: 1%; margin-bottom: 2%;" (click)="open(this.value = post._id)" *ngIf="this.reply == false">Reply</button>
              <button class="btn btn-warning btn-sm" style="float: left; max-width: 90px; margin-left: 1%; margin-bottom: 2%;" (click)="showComments(this.value = post._id)">Comments</button>
            </div>
          </div>
      </div>
  </div>

  <!-- Add comment -->
  <div class="card-header" *ngIf="this.replyOpen == true && this.value == post._id">
    <form [formGroup]="commentForm">
      <textarea class="container form-control form-control-lg d-flex" style="max-height: 150px; max-width: 800px; justify-content: center; margin-bottom: 1%; margin-top: 1%;" formControlName="body" placeholder="Add comment..."></textarea>
        <div class="text-danger"
        *ngIf="commentForm.get('body')?.hasError('required') && commentForm.get('body')?.touched">
          <span>Comment is <strong>required</strong></span>
        </div>
        <div class="text-danger"
          *ngIf="commentForm.get('body')?.hasError('minlength')">
            <span>Comment must contain <strong>1 character</strong></span>
        </div>
        <div class="text-danger"
          *ngIf="commentForm.get('body')?.hasError('maxlength')">
            <span>Comment cant have more than <strong>250 characters</strong></span>
        </div>
    </form> 
    <button class="btn btn-primary btn-sm" style="float: right; max-width: 60px" (click)="addComment(this.value)">Send</button>
    <button class="btn btn-danger btn-sm" style="float: right; max-width: 65px" (click)="close()">Cancel</button>
  </div>

  <!-- Show Comments -->
  <div class="card-header" style="max-height: 200px; margin-bottom: 2%;" *ngIf="this.showComment === true && this.value === post._id">
    <div class="card-content" *ngFor="let ele of element">
      <h2 (click)="userProfile(ele.user)">@{{ ele.user }}
        <button class="btn btn-danger btn-sm" style="float: right;" *ngIf="this.test2 === ele.user" (click)="deleteComment(ele._id)">Delete</button>
      </h2>
      <h4>{{ ele.body }}</h4>
    </div>
    <button class="btn btn-danger btn-sm" style="float: right; max-width: 65px" (click)="closeComments()">Close</button>
  </div>

</div>